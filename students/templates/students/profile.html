{% extends "itreporting/base.html" %}
{% load crispy_forms_tags %}

{% block content %}
<title>Student Profile</title>

<div class="container mt-5">
    <h1 class="text-dark mb-4">Student IT Services - Profile Details</h1>

    <div class="border rounded p-4 bg-white shadow-sm">
        <!-- Profile Information Section -->
        <div class="media mb-4">
            <div>
                {% if user.profile.image %}
                    <img class="rounded-circle account-img" src="{{ user.profile.image.url }}" alt="Profile Picture" width="100" height="100">
                {% else %}
                    <img class="rounded-circle account-img" src="/media/profile_pics/default.png" alt="Default Profile Picture" width="100" height="100">
                {% endif %}
            </div>
            <div class="media-body ml-4">
                <h2 class="account-heading">{{ user.first_name }} {{ user.last_name }}</h2>
                <p class="text-secondary mb-1"><strong>Username:</strong> {{ user.username }}</p>
                <p class="text-secondary mb-1"><strong>Email:</strong> {{ student_id }}</p>
                <p class="text-secondary mb-1"><strong>Email:</strong> {{ user.email }}</p>
            </div>
        </div>

        <!-- Profile Update Form -->
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <fieldset class="form-group">
                <legend class="mb-4 text-secondary">Update User Profile</legend>
                {{ u_form | crispy }}
                {{ p_form | crispy }}
            </fieldset>

            <div class="form-group mt-4">
                <button class="btn btn-primary" type="submit">Update User Profile</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}